<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta charset="utf-8" />

    <title>URDF Viewer Example</title>

    <script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.4.3/webcomponents-bundle.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300" rel="stylesheet" />
    <link href="./styles.css" type="text/css" rel="stylesheet">
    <!-- <script src="./redirect.js"></script> -->

    <link href="./device_set_style.css" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="#">

</head>

<body tabindex="0">

    <div id="corner-logo">
        <img src="./Logo_PLCM_RGB_mit Text.svg" alt="Logo PLCM">
        <img src="./RoboTeach_Logo.png" alt="Logo RoboTeach">
    </div>

    <div class="info-box-header">
        <button id="refresh-info-box" title="Refresh">&#x21bb;</button>
    </div>
    <div id="info-box">

        <div id="info-toggle-btn"></div>
        <div id="info-content">
            <h2>OPC UA Address Space</h2>
            <p>OPC UA Address Space.</p>
        </div>
    </div>


    <div id="properties-box" style="display: none;">
        <div class="tab-header">
            <button class="tab-btn active" data-tab="properties">Properties</button>
            <button class="tab-btn" data-tab="subscriptions">Subscriptions</button>
            <button class="tab-btn" data-tab="events">Events</button>
            <button class="tab-btn" data-tab="references">References</button>
        </div>
        <div class="tab-content active" id="tab-properties">
            <table id="properties-table"></table>
        </div>


        <div class="tab-content" id="tab-subscriptions">
            <table id="subscriptions-table">
                <thead>
                    <tr>
                        <th>NodeId</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>

        <div class="tab-content" id="tab-events">
            <p>No events captured.</p>
        </div>


        <div class="tab-content" id="tab-references">
            <table id="references-table">
                <thead>
                    <tr>
                        <th>ReferenceType</th>
                        <th>NodeId</th>
                        <th>BrowseName</th>
                        <th>TypeDefinition</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>

    </div>

    <div id="menu">
        <h1
            style="font-family: '3ds', 'Roboto', Arial, sans-serif; font-size: 2.1em; font-weight: 700; letter-spacing: 0.01em; margin-bottom: 10px;">
            <span style="color: rgb(32, 32, 32);">Digital Twin</span> <span
                style="color: rgb(80, 114, 176);">Teach-In</span>
        </h1>

        <ul id="urdf-options">
            <li urdf="/urdf/eva_description/urdf/eva_description.urdf" color="#546575">EVA Automata</li>
            <li urdf="/urdf/fr3_description/urdf/fr3.urdf" color="#567554">Franka Research 3</li>
            <li urdf="/urdf/ur5_description/urdf/ur5_robot.urdf" color="#aaaab3">UR5e</li>
        </ul>
        <div id="controls" class="hidden">
            <div id="toggle-controls"></div>
            <div id="ignore-joint-limits" class="toggle">Ignore Joint Limits</div>
            <div id="hide-fixed" class="toggle">Hide Fixed Joints</div>
            <div id="radians-toggle" class="toggle">Use Radians</div>
            <div id="autocenter-toggle" class="toggle ">Autocenter</div>
            <div id="collision-toggle" class="toggle">Show Collision</div>
            <div id="do-animate" class="toggle ">Animate Joints</div>
            <label>
                Up Axis
                <select id="up-select">
                    <option value="+X">+X</option>
                    <option value="-X">-X</option>
                    <option value="+Y">+Y</option>
                    <option value="-Y">-Y</option>
                    <option value="+Z" selected>+Z</option>
                    <option value="-Z">-Z</option>
                </select>
            </label>
            <ul></ul>
        </div>
        <div id="opc-ua" class="hidden">
            <div id="toggle-opc-ua"></div>
            <div>


                <label for="opc-ua-url">OPC UA Server URL:</label><br>
                <div id="opc-ua-input-container">
                    <input list="opc-ua-url-list" type="text" multiple id="opc-ua-url" />
                    <datalist id="opc-ua-url-list">
                        <option value="opc.tcp://127.0.0.1:4840/freeopcua/server/"></option>
                        <option value="opc.tcp://10.10.38.25:4840/freeopcua/server/"></option>
                        <option value="opc.tcp://10.10.38.26:4840/freeopcua/server/"></option>
                        <option value="opc.tcp://10.10.38.27:4840/freeopcua/server/"></option>

                    </datalist>

                </div>
                <button id="connect-opc-ua">Connect</button>
                <button id="disconnect-opc-ua">Disconnect</button>

            </div>
            <div id="opc-ua-sync-toggle-container" style="margin: 10px 0 0 0;">
                <label class="switch">
                    <input type="checkbox" id="opc-ua-sync-toggle">
                    <span class="slider round"></span>
                </label>
                <span style="margin-left: 10px; font-size: 14px; vertical-align: middle;">Synchronize
                    OPC UA
                    server</span>
            </div>
            <div id="method-call-status" style="display:none;">
                <span id="method-spinner" class="ds-spinner"
                    style="margin-right:10px; display:inline-block; vertical-align:middle;"></span>
                <span id="method-status-text" style="vertical-align:middle;"></span>
            </div>

        </div>

        <div id="robot-dashboard" class="hidden">
            <div id="toggle-robot-dashboard"></div>

            <div class="dashboard-row">
                Manufacturer: <span id="robot-manufacturer">-</span>
            </div>
            <div class="dashboard-row">
                Model: <span id="robot-model">‚Äì</span>
            </div>
            <div class="dashboard-row">
                Locked: <span id="robot-locked">‚Äì</span>
            </div>
            <div class="dashboard-row">
                Locking User: <span id="robot-locking-user">‚Äì</span>
            </div>
            <div class="dashboard-row">
                Remaining Lock Time: <span id="robot-remaining-lock">‚Äì</span>
            </div>
            <div class="dashboard-row">
                Remaining Session Time: <span id="robot-remaining-session">‚Äì</span>
            </div>
            <div class="dashboard-row">
                Waypoints:
                <ul id="robot-waypoints-list">
                    <!-- <li>Waypoint 1</li> -->
                </ul>
            </div>
            <div class="dashboard-row">
                Errors: <span id="robot-errors">None</span>
            </div>
        </div>






    </div>

    <div id="robot-stats-box">
        <div id="home-icon">
            <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="white" stroke-width="2.2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 11.5L12 4l9 7.5" />
                <path d="M5 10.5V20a1 1 0 0 0 1 1h3.5a1 1 0 0 0 1-1v-4h2v4a1 1 0 0 0 1 1H18a1 1 0 0 0 1-1v-9.5" />
            </svg>
        </div>

        <div id="robot-stats-title">Live Status</div>
        <div id="robot-stats-content">
            <p>Connected Robot Name: <span id="robot-name-value">-</span></p>
            <p>Status: <span id="robot-status-value">Not Connected</span></p>
            <p>Joints: <span id="robot-position-value">-</span></p>
            <p>TCP: <span id="robot-tcp-value">-</span></p>
            <p>Mode: <span id="robot-mode-value">-</span></p>
            <!-- Weitere Werte k√∂nnen hier erg√§nzt werden -->
        </div>
    </div>




    <div id="message-box">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <strong style="font-size: 16px;">Message Log</strong>
            <button id="clear-log-btn" class="ds-btn ds-btn-secondary">üóëÔ∏è L√∂schen</button>
        </div>
        <div id="message-log"></div>
    </div>






    <div id="custom-context-menu" style="display:none;">
        <ul class="context-menu-list">
            <li id="context-call-method" class="context-menu-item">
                <span class="context-menu-label">Methode ausf√ºhren</span>
            </li>
            <li id="context-subscribe" class="context-menu-item">
                <span class="context-menu-label">Variable abonnieren</span>
            </li>
            <li id="context-unsubscribe" class="context-menu-item">
                <span class="context-menu-label">Variable deabonnieren</span>
            </li>
            <li id="context-subscribe_event" class="context-menu-item">
                <span class="context-menu-label">Event abonnieren</span>
            </li>
            <li id="context-unsubscribe_event" class="context-menu-item">
                <span class="context-menu-label">Event deabonnieren</span>
            </li>
        </ul>
    </div>



    <div id="robot-lock-toggle-container"
        style="position: fixed; top: 18px; left: 50%; transform: translateX(-50%); z-index: 1001;">
        <label class="switch">
            <input type="checkbox" id="robot-lock-toggle">
            <span class="slider round"></span>
        </label>
        <span style="margin-left: 10px; font-size: 14px; vertical-align: middle;">Lock</span>
    </div>

    <urdf-viewer up="-Z" display-shadow tabindex="0"></urdf-viewer>

    <script type="module" src="./index.js"></script>
    <script src="./functionalities.js"></script>
</body>

</html>